(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4cae4982"],{"1ced":function(t,e,s){},"5d54":function(t,e,s){"use strict";s("1ced")},"8b10":function(t,e,s){"use strict";var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"back-nav"},[s("van-nav-bar",{attrs:{title:t.title,"left-text":t.leftText,"right-text":t.rightText,"left-arrow":t.leftArrow},on:{"click-left":t.back}})],1)},n=[],a={name:"BackNav",props:{title:{type:String,default:""},leftArrow:{type:Boolean,default:!1},leftText:{type:String,default:""},rightText:{type:String,default:""}},methods:{back:function(){this.$router.go(-1)}}},i=a,c=(s("d4d8"),s("2877")),r=Object(c["a"])(i,o,n,!1,null,"718629a2",null);e["a"]=r.exports},b8fe:function(t,e,s){},d4d8:function(t,e,s){"use strict";s("b8fe")},e02c:function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"SafetyCenter"},[s("div",{staticClass:"safe-nav-box"},[s("BackNav",{attrs:{"left-arrow":"","left-text":"返回",title:"安全中心"}})],1),s("div",{staticClass:"safe-main-top"}),s("div",{staticClass:"safe-main-box"},[s("div",{staticClass:"safe-content-item",on:{click:t.popup}},[s("div",{staticClass:"safe-content-title"},[t._v("修改密码")]),s("div",{staticClass:"safe-content-right"},[s("van-icon",{attrs:{name:"arrow"}})],1)]),s("div",{staticClass:"safe-content-item",on:{click:t.destroyAccount}},[s("div",{staticClass:"safe-content-title"},[t._v("注销账号")]),s("div",{staticClass:"safe-content-right"},[s("van-icon",{attrs:{name:"arrow"}})],1)]),s("div",{staticClass:"log-out-box"},[s("van-button",{attrs:{type:"primary",color:"#0C34BA",round:"",block:""},on:{click:t.logout}},[t._v("退出登录")])],1)]),s("van-popup",{style:{height:"40%"},attrs:{position:"bottom",closeable:""},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[s("div",{staticClass:"updataPsw"},[t._v("修改密码")]),s("van-form",[s("van-field",{attrs:{type:t.isOpen?"text":"password",name:"password",label:"旧密码",placeholder:"旧密码(6-16位)","right-icon":t.isOpen?"eye-o":"closed-eye",autocomplete:"off",rules:[{required:!0,message:"请填写密码"},{pattern:t.passwordReg,message:"支持数字字母下划线组合并且以字母开头"}]},on:{"click-right-icon":t.togglePasswordStatus},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),s("van-field",{attrs:{type:t.isOpen2?"text":"password",name:"password",label:"新密码",placeholder:"新密码(6-16位)","right-icon":t.isOpen2?"eye-o":"closed-eye",autocomplete:"off",rules:[{required:!0,message:"请填写密码"},{pattern:t.passwordReg,message:"支持数字字母下划线组合并且以字母开头"}]},on:{"click-right-icon":t.togglePasswordStatus2},model:{value:t.newpsw,callback:function(e){t.newpsw=e},expression:"newpsw"}}),s("van-button",{staticStyle:{"margin-top":"70px"},attrs:{type:"primary",color:"#0C34BA",round:"",block:""},on:{click:t.updatePassword}},[t._v("确认密码")])],1)],1)],1)},n=[],a=(s("e17f"),s("2241")),i=(s("e7e5"),s("d399")),c=s("8b10"),r={data:function(){return{show:!1,password:"",isOpen:!1,passwordReg:/^[A-Za-z]\w{5,15}$/,newpsw:"",isOpen2:!1,tokenString:null}},components:{BackNav:c["a"]},methods:{popup:function(){this.show=!0},togglePasswordStatus:function(){this.isOpen=!this.isOpen},togglePasswordStatus2:function(){this.isOpen2=!this.isOpen2},updatePassword:function(){var t=this,e=this.password,s=this.newpsw;this.axios({url:"updatePassword",method:"post",data:{tokenString:this.tokenString,password:s,oldPassword:e}}).then((function(e){console.log(e),"E001"===e.data.code?(i["a"].success("修改密码成功,请重新登录"),t.show=!1,setTimeout((function(){t.$router.push({name:"Login"})}),1e3)):"E003"===e.data.code&&i["a"].fail(e.data.msg)})).catch((function(t){console.log(t)}))},destroyAccount:function(){var t=this;a["a"].confirm({title:"注销账号",message:"是否确定注销账号，一旦注销账号无法恢复",confirmButtonColor:"#0c34ba"}).then((function(){t.axios({url:"/destroyAccount",method:"post",data:{tokenString:t.tokenString}}).then((function(e){console.log(e),"G001"===e.data.code?(i["a"].success("注销成功,返回登录"),setTimeout((function(){t.$router.push({name:"Login"})}),1e3)):(Object(i["a"])("你还没登录，返回登录页面"),setTimeout((function(){t.$router.push({name:"Login"})}),1e3))})).catch((function(t){console.log(t)}))})).catch((function(){}))},logout:function(){var t=this;this.axios({url:"/logout",method:"post",data:{tokenString:this.tokenString}}).then((function(e){console.log(e),"F001"===e.data.code?(i["a"].success("退出登录成功,返回登录页面"),setTimeout((function(){t.$router.push({name:"Login"})}),1e3)):(Object(i["a"])("你还没登录，返回登录页面"),setTimeout((function(){t.$router.push({name:"Login"})}),1e3))})).catch((function(t){console.log(t)}))}},created:function(){var t=sessionStorage.getItem("token");this.tokenString=t}},l=r,u=(s("5d54"),s("2877")),d=Object(u["a"])(l,o,n,!1,null,"277b761c",null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-4cae4982.b8be3d2d.js.map