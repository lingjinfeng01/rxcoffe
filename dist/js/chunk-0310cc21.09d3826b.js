(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0310cc21"],{"159b":function(t,s,e){var i=e("da84"),a=e("fdbc"),o=e("17c2"),n=e("9112");for(var c in a){var r=i[c],l=r&&r.prototype;if(l&&l.forEach!==o)try{n(l,"forEach",o)}catch(d){l.forEach=o}}},"17c2":function(t,s,e){"use strict";var i=e("b727").forEach,a=e("a640"),o=a("forEach");t.exports=o?[].forEach:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}},"324d":function(t,s,e){},"3a23":function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"cleaning"},[e("div",{staticClass:"clearning-nav-box"},[e("BackNav",{attrs:{"left-arrow":"","left-text":"返回",title:"订单结算"}})],1),e("div",{staticClass:"cleaning-main-box"},[e("div",{staticClass:"cleaning-address-box"},[e("div",{staticClass:"select-address",on:{click:t.popup}},[t._v("选择地址 >")]),e("div",{staticClass:"contact-info-box"},[e("div",{staticClass:"contact-info-detail"},[e("div",{staticClass:"info-name"},[t._v(t._s(t.opt.name))]),e("div",{staticClass:"info-tel"},[t._v(t._s(t.opt.tel))]),t.opt.isDefault?e("div",{staticClass:"info-default"},[t._v("默认")]):t._e()]),e("div",{staticClass:"info-address"},[t._v(t._s(t.opt.address))])])]),e("div",{staticClass:"order-info-box"},[e("div",{staticClass:"order-info-title"},[t._v("订单信息")]),t._l(t.commitList,(function(s,i){return e("div",{key:i,staticClass:"order-info-item"},[e("van-card",{attrs:{num:s.count,price:s.price,desc:s.desc,thumb:s.small_img},scopedSlots:t._u([{key:"title",fn:function(){return[e("div",{staticClass:"info-type",staticStyle:{display:"flex"}},[e("div",{staticClass:"info-type-title",staticStyle:{margin:"5px","font-weight":"bold","font-size":"13px"}},[t._v(t._s(s.name))]),e("div",{staticClass:"info-type-rule",staticStyle:{margin:"5px",color:"#ccc"}},[t._v(t._s(s.rule))])]),e("div",{staticClass:"info-enname"},[t._v(" "+t._s(s.enname)+" ")])]},proxy:!0}],null,!0)})],1)}))],2),e("div",{staticClass:"clearning-bottom-box"},[e("div",{staticClass:"bottom-time"},[t._v(t._s(t.createTime))]),e("div",{staticClass:"bottom-total-box"},[e("div",{staticClass:"total-left"},[t._v("共计"+t._s(t.count)+"件")]),e("div",{staticClass:"total-right"},[t._v("合计￥"+t._s(t.total)+"元")])])]),e("div",{staticClass:"bottom-button"},[e("van-button",{attrs:{type:"primary",block:"",round:"",color:"#0c34ba"},on:{click:t.pay}},[t._v("立即结算")])],1)]),e("van-popup",{style:{height:"40%"},attrs:{closeable:"",position:"bottom"},model:{value:t.isShow,callback:function(s){t.isShow=s},expression:"isShow"}},[e("van-address-list",{attrs:{list:t.list,switchable:"","default-tag-text":"默认",color:"#0c34ba"},on:{add:t.onAdd,select:t.selectAddress,"click-item":t.toggleAddress},model:{value:t.chosenAddressId,callback:function(s){t.chosenAddressId=s},expression:"chosenAddressId"}})],1)],1)},a=[],o=(e("e7e5"),e("d399")),n=(e("159b"),e("b0c0"),e("99af"),e("8b10")),c={data:function(){return{isShow:!1,chosenAddressId:"100",tokenString:null,list:[],createTime:"",commitList:[],opt:{},sids:null,count:0,total:0}},watch:{isShow:function(){this.isShow||(this.list=[])}},components:{BackNav:n["a"]},created:function(){this.sids=sessionStorage.getItem("sids"),console.log(this.sids);var t=sessionStorage.getItem("token");this.tokenString=t,this.getCommitShopCar(t,this.sids)},methods:{popup:function(){var t=this;this.isShow=!0,this.axios({url:"/findAddress",method:"get",params:{tokenString:this.tokenString}}).then((function(s){2e4===s.data.code&&s.data.result.forEach((function(s,e){t.list.push({id:"".concat(e),name:s.name,tel:s.tel,address:"".concat(s.province).concat(s.city).concat(s.county).concat(s.addressDetail),isDefault:s.isDefault,aid:s.aid,data:[s]})})),console.log(t.list)})).catch((function(t){console.log(t)}))},onAdd:function(){this.$router.push({name:"AddressList"})},selectAddress:function(t,s){console.log(t,s),this.opt=t,console.log(this.opt)},toggleAddress:function(){this.isShow=!1},getCommitShopCar:function(t,s){var e=this;this.axios({method:"get",url:"/commitShopcart",params:{tokenString:t,sids:s}}).then((function(t){5e4==t.data.code&&(console.log(t),t.data.result.forEach((function(t){e.count+=t.count,e.total+=t.count*t.price})),e.commitList=t.data.result,e.createTime=t.data.result[0].created_at,e.createTime=e.dayjs(e.createTime).format("YYYY-MM-DD HH:mm:ss"))})).catch((function(t){console.log(t)}))},pay:function(){var t=this;"{}"===JSON.stringify(this.opt)?o["a"].fail("请选择地址"):this.axios({url:"/pay",method:"post",data:{tokenString:this.tokenString,phone:this.opt.tel,address:this.opt.address,receiver:this.opt.name,sids:this.sids}}).then((function(s){6e4===s.data.code&&t.$router.push({name:"MyOrder"}),console.log(s)})).catch((function(t){console.log(t)}))}}},r=c,l=(e("4771"),e("2877")),d=Object(l["a"])(r,i,a,!1,null,"1a03da2d",null);s["default"]=d.exports},4771:function(t,s,e){"use strict";e("324d")},"8b10":function(t,s,e){"use strict";var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"back-nav"},[e("van-nav-bar",{attrs:{title:t.title,"left-text":t.leftText,"right-text":t.rightText,"left-arrow":t.leftArrow},on:{"click-left":t.back}})],1)},a=[],o={name:"BackNav",props:{title:{type:String,default:""},leftArrow:{type:Boolean,default:!1},leftText:{type:String,default:""},rightText:{type:String,default:""}},methods:{back:function(){this.$router.go(-1)}}},n=o,c=(e("d4d8"),e("2877")),r=Object(c["a"])(n,i,a,!1,null,"718629a2",null);s["a"]=r.exports},a640:function(t,s,e){"use strict";var i=e("d039");t.exports=function(t,s){var e=[][t];return!!e&&i((function(){e.call(null,s||function(){throw 1},1)}))}},b0c0:function(t,s,e){var i=e("83ab"),a=e("9bf2").f,o=Function.prototype,n=o.toString,c=/^\s*function ([^ (]*)/,r="name";i&&!(r in o)&&a(o,r,{configurable:!0,get:function(){try{return n.call(this).match(c)[1]}catch(t){return""}}})},b727:function(t,s,e){var i=e("0366"),a=e("44ad"),o=e("7b0b"),n=e("50c4"),c=e("65f0"),r=[].push,l=function(t){var s=1==t,e=2==t,l=3==t,d=4==t,u=6==t,f=7==t,h=5==t||u;return function(p,v,m,g){for(var b,x,_=o(p),y=a(_),C=i(v,m,3),S=n(y.length),k=0,w=g||c,A=s?w(p,S):e||f?w(p,0):void 0;S>k;k++)if((h||k in y)&&(b=y[k],x=C(b,k,_),t))if(s)A[k]=x;else if(x)switch(t){case 3:return!0;case 5:return b;case 6:return k;case 2:r.call(A,b)}else switch(t){case 4:return!1;case 7:r.call(A,b)}return u?-1:l||d?d:A}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterOut:l(7)}},b8fe:function(t,s,e){},d4d8:function(t,s,e){"use strict";e("b8fe")}}]);
//# sourceMappingURL=chunk-0310cc21.09d3826b.js.map